/*! 
 * Riloadr.js 1.3.1 (c) 2012 Tubal Martin - MIT license
 */
!function(e){typeof define=="function"&&define.amd?define(["jquery"],e):window.Riloadr=e(jQuery)}(function(e){"use strict";function $(t){function ot(){nt(O,h,B),nt(O,p,j),q&&(V=O[T],nt(O,k,F))}function ut(){rt(O,h,B),rt(O,p,j),q&&rt(O,k,F)}function at(e,t){e[m]=0,e[b]=r,e[d]=ft,e[v]=lt,e.src=Q(e,a,W),I.splice(t,1)}function ft(){var e=this;e[d]=e[v]=s,e[w]=e[w].replace(E,"$1$2"),d in t&&t[d][u](e),ct()}function lt(){var e=this;v in t&&t[v][u](e),e[m]<D?(e[m]++,e.src=Q(e,a,e[b]?$:W,n)):b in z&&!e[b]?(e[m]=0,e[b]=n,e.src=Q(e,a,$)):ct()}function ct(){U--,U==0&&S in t&&t[S]()}var o=this,a=t.base||l,f=t.breakpoints||tt('"breakpoints" not defined.'),g=t.name||"responsive",E=new RegExp("(^|\\s)"+g+"(\\s|$)"),N=t.defer&&t.defer.toLowerCase()||r,C=t.foldDistance||100,_=t.ignoreLowBandwidth||r,D=t[m]||0,P=t.root||s,H=N==="belowfold"&&!X,B=H&&Y(function(){o[x]()},i),j=H&&Z(function(){o[x]()},i),F=H&&Z(function(){O[T]!==V&&(V=O[T],o[x]())},i),I=[],U=0,z,W,$;o[x]=function(t){et(function(r,i){if(!I[c]||t===n)H&&ot(),e("img."+g,P).each(function(e,t){t&&!t[y]&&(t[y]=n,I.push(t),U++)});if(I[c]){i=0;while(r=I[i])r&&(!H||H&&!G(r,C))&&(at(r,i),i--),i++}H&&!I[c]&&ut(),r=s})},it(function(){L=e(O),A=M.body,P=P&&e("#"+P)||A,R=R||K(),z=J(f,R,_),W=z.name,$=z[b],!N||H?o[x]():st(o[x])})}function J(e,t,n){var r=t,i=0,s={},o,u,a,f;while(o=e[i]){u=o.minWidth,a=o.maxWidth,f=o.minDevicePixelRatio;if(t>0){if(u&&a&&t>=u&&t<=a||u&&!a&&t>=u||a&&!u&&t<=a)if(!f||f&&z>=f&&(n||!n&&!W))s=o}else if(r<=0||u<r||a<r)r=u||a||r,s=o;i++}return s}function K(){var e=Math,t=[_.clientWidth,_.offsetWidth,A.clientWidth],n=e.ceil(U/z),r=t[c],i=0,s;for(;i<r;i++)isNaN(t[i])&&(t.splice(i,1),i--);return t[c]&&(s=e.max[a](e,t),isNaN(n)||(s=e.min(n,s))),s||n||0}function Q(e,t,n,r){var i=(e.getAttribute("data-base")||t)+(e.getAttribute("data-src")||l);return r&&(i+=(F.test(i)?"&":"?")+"riloadrts="+(new Date).getTime()),i.replace(I,n)}function G(t,n){return L.height()+L.scrollTop()<=e(t).offset().top-n}function W(){var e=O.navigator,t=e.connection||e.mozConnection||e.webkitConnection||e.oConnection||e.msConnection||{},n=t.type||"unknown",r=+t.bandwidth||Infinity;return r>0&&r<.1||/^[23]g|3|4$/.test(n+l)}function Y(e,t){function f(){u=new Date,o=s,e[a](i,n)}var n,r,i,o,u=0;return function(){var s=new Date,l=t-(s-u);return n=arguments,i=this,l<=0?(u=s,r=e[a](i,n)):o||(o=D(f,l)),r}}function Z(e,t,n){function f(){u=s,n||e[a](o,r)}var r,i,o,u;return function(){var s=n&&!u;return r=arguments,o=this,clearTimeout(u),u=D(f,t),s&&(i=e[a](o,r)),i}}function et(e){var t=Array[E].slice[u](arguments,1);D(function(){return e[a](s,t)},1)}function tt(e){throw new Error("Riloadr: "+e)}function nt(e,t,n){e[B](H+t,n,r)}function rt(e,t,n){e[j](H+t,n,r)}function it(t){e(t)}function st(e){if(M.readyState===g)e();else{var t=function(){rt(O,o,t),e()};nt(O,o,t)}}var t="on",n=!0,r=!1,i=250,s=null,o="load",u="call",a="apply",f="error",l="",c="length",h="scroll",p="resize",d=t+o,v=t+f,m="retries",g="complete",y="riloaded",b="fallback",w="className",E="prototype",S=t+g,x="loadImages",T="orientation",N="EventListener",C="add"+N,k=T+"change",L,A,O=window,M=O.document,_=M.documentElement,D=O.setTimeout,P=C in M,H=P?l:t,B=P?C:"attachEvent",j=P?"remove"+N:"detachEvent",F=/\?/,I=/{breakpoint-name}/gi,q=T in O&&t+k in O,R,U=O.screen.width,z=O.devicePixelRatio||1,W=W(),X=Object[E].toString[u](O.operamini)==="[object OperaMini]",V;return _[w]=_[w].replace(/(^|\s)no-js(\s|$)/,"$1$2"),$.version="1.3.1",$[E].riload=function(){this[x](n)},$});