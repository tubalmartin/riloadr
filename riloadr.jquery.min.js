/*!
 * Riloadr.js 1.5.0 (c) 2013 Tubal Martin - MIT license
 */
;!function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{window.Riloadr=a(jQuery)}}(function(az){var at="on",f="top",an="src",P=!0,ao="body",b="left",v=!1,Y=250,af=null,ac="load",aE="call",V="apply",y="error",C="width",au="",aA="height",ad="length",q="scroll",ak="offset",ai="resize",m=at+ac,I=at+y,A=at+"abort",W="retries",R="minWidth",M="maxWidth",aC="complete",u="riloaded",d="fallback",al="className",t="imgFormat",aB="prototype",ae="undefined",ah=q+"Top",s=at+aC,a=q+"Left",i=ac+"Images",X="orientation",r="EventListener",T="getElementById",j="add"+r,aD=X+"change",ap="minDevicePixelRatio",Z,p,ag=window,z=ag.document,aF=z.documentElement,O=j in z,L=O?au:at,o=O?j:"attachEvent",N=O?"remove"+r:"detachEvent",aj=/\?/,ax=/{breakpoint-name}/gi,l=X in ag&&at+aD in ag,aa,B=ag.screen[C],n=ag.devicePixelRatio||1,E=E(),e=Object[aB].toString[aE](ag.operamini)==="[object OperaMini]",J;aF[al]=aF[al].replace(/(^|\s)no-js(\s|$)/,"$1$2");function F(aM){var a8=this,aQ=aM.base||au,aU=aM.breakpoints||aq('"breakpoints" not defined.'),aJ=aM.name||"responsive",aS=new RegExp("(^|\\s)"+aJ+"(\\s|$)"),aZ=aM.defer&&(typeof aM.defer=="string"?{mode:aM.defer,threshold:aM.foldDistance,overflownElemsIds:[]}:aM.defer),ba=aZ&&aZ.mode.toLowerCase(),aN=aZ&&aZ.threshold||100,aW=aZ&&aZ.overflownElemsIds,aO=aM.watchViewportWidth,bd=!!aO,aK=aO=="wider",bf=aO=="*",a3=aM.ignoreLowBandwidth||v,aI=aM[W]||0,a4=aM.root||af,a2=(ba=="invisible"||ba=="belowfold")&&!e,be=av(function(){a8[i]()},Y),aR=aG(function(){bd&&bc();a8[i](bd)},Y),a9=aG(function(){if(ag[X]!==J){J=ag[X];a8[i]()}},Y),aY=[],a7=0,bb,a5,aX={},aV,a6;function bc(){aa=ar();bb=K(aU,aa,a3);aX=bb[d]&&g(aU,bb[d]);aV=aV||bd&&k(aU);a6=aK&&D(bb,aV)}function aT(){var bg=0,bh;if(a2||bd){Q(ag,ai,aR)}if(a2){Q(ag,q,be);if(l){J=ag[X];Q(ag,aD,a9)}if(aW){while(bh=aW[bg]){Q(z[T](bh),q,be);bg++}}}}function a1(){var bg=0,bh;if(!bd){U(ag,ai,aR);if(a2){U(ag,q,be);if(aW){while(bh=aW[bg]){U(z[T](bh),q,be);bg++}}l&&U(ag,aD,a9)}}}function aL(bh,bg){bh[W]=0;bh[d]=v;bh[m]=aH;bh[I]=bh[A]=a0;bh[an]=ay(bh,aQ,bb);aY.splice(bg,1)}function aH(){var bg=this,bh,bi;if("naturalWidth" in bg){bi=bg.naturalWidth+bg.naturalHeight}else{bh=new Image;bh[an]=bg[an];bi=bh[C]+bh[aA];bh=af}if(+bi>0){bg[m]=bg[I]=bg[A]=af;bg[u]&&(bg[al]=bg[al].replace(aS,"$1$2"));a2&&(bg.style.visibility="visible");m in aM&&aM[m][aE](bg);aP()}}function a0(){var bg=this,bh=function(bk){var bj=new Image;bj[m]=function(){bg[an]=bj[an];aH[aE](bg)};bj[I]=bg[A]=function(){a0[aE](bg)};bj[an]=bk},bi;bg[m]=bg[I]=bg[A]=af;I in aM&&aM[I][aE](bg);if(bg[W]<aI){bg[W]++;bi=ay(bg,aQ,(bg[d]?aX:bb),P);bh(bi)}else{if(d in bb&&!bg[d]){bg[W]=0;bg[d]=P;bi=ay(bg,aQ,aX);bh(bi)}else{aP()}}}function aP(){a7--;if(a7===0){a1();s in aM&&aM[s]()}}a8[i]=function(bg){ab(function(bi,bh){if(!aY[ad]||bg===P){bg&&aT();az("img."+aJ,a4).each(function(bj,bk){if(bk&&!bk[u]){if(!bd||bd&&(!a5||(aK&&h(bb,a5)||bf&&!D(bb,a5)))){aY.push(bk);a7++}if(!bd||a6){bk[u]=P}}});if(bd){if(a6){bd=v}a5=bb}}if(aY[ad]){bh=0;while(bi=aY[bh]){if(bi&&(!a2||(a2&&am(bi,aN)))){aL(bi,bh);bh--}bh++}}bi=af})};S(function(){Z=az(ag);p=z[ao];a4=a4&&az("#"+a4)||p;bc();aT();if(!ba||a2){a8[i]()}else{w(a8[i])}})}F.version="1.5.0";F[aB].riload=function(){this[i](P)};function K(aL,aH,aQ){var aM=aH,aJ=0,aN={},aP,aI,aO,aK;while(aP=aL[aJ]){aI=aP[R];aO=aP[M];aK=aP[ap];if(aH>0){if(aI&&aO&&aH>=aI&&aH<=aO||aI&&!aO&&aH>=aI||aO&&!aI&&aH<=aO){if(!aK||aK&&n>=aK&&(aQ||!aQ&&!E)){aN=aP}}}else{if(aM<=0||aI<aM||aO<aM){aM=aI||aO||aM;aN=aP}}aJ++}return aN}function k(aJ){var aI=0,aH={},aK;while(aK=aJ[aI]){h(aK,aH)&&(aH=aK);aI++}return aH}function g(aI,aK){var aH=0,aJ;while(aJ=aI[aH]){if(aJ.name==aK){return aJ}aH++}}function D(aI,aH){return aI.name===aH.name&&aI[R]===aH[R]&&aI[M]===aH[M]&&aI[ap]===aH[ap]&&aI[t]===aH[t]}function h(aI,aH){var aJ=+aI[ap]||1,aK=+aH[ap]||1;aI=Math.max(+aI[R]||0,+aI[M]||0)*(n>=aJ?aJ:1);aH=Math.max(+aH[R]||0,+aH[M]||0)*(n>=aK?aK:1);return aI>aH}function ar(){var aM=Math,aL=[aF.clientWidth,aF.offsetWidth,p.clientWidth],aK=aM.ceil(B),aH=aL[ad],aI=0,aJ;for(;aI<aH;aI++){if(isNaN(aL[aI])){aL.splice(aI,1);aI--}}if(aL[ad]){aJ=aM.max[V](aM,aL);if(!isNaN(aK)){aJ=aM.min(aK,aJ)}}return aJ||aK||0}function ay(aI,aK,aH,aJ){var aL=(aI.getAttribute("data-base")||aK)+(aI.getAttribute("data-src")||aI.getAttribute("data-src-"+aH.name)||au);if(aH[t]){aL=aL.split(".");aL.pop();aL=aL.join(".")+"."+aH[t]}if(aJ){aL+=(aj.test(aL)?"&":"?")+"riloadrts="+(new Date).getTime()}return aL.replace(ax,aH.name)}function E(){var aH=ag.navigator,aI=aH.connection||aH.mozConnection||aH.webkitConnection||aH.oConnection||aH.msConnection||{},aK=aI.type||"unknown",aJ=+aI.bandwidth||Infinity;return aJ>0&&aJ<0.1||/^[23]g|3|4$/.test(aK+au)}function am(aI,aH){var aJ=az(aI);return !aw(aJ,aH)&&!G(aJ,aH)&&!x(aJ,aH)&&!H(aJ,aH)}function aw(aI,aH){return Z[aA]()+Z[ah]()<=aI[ak]()[f]-aH}function G(aI,aH){return Z[ah]()>=aI[ak]()[f]+aH+aI[aA]()}function x(aI,aH){return Z[C]()+Z[a]()<=aI[ak]()[b]-aH}function H(aI,aH){return Z[a]()>=aI[ak]()[b]+aH+aI[C]()}function av(aM,aN){var aK,aH,aI,aO,aJ=0;function aL(){aJ=new Date;aO=af;aM[V](aI,aK)}return function(){var aP=new Date,aQ=aN-(aP-aJ);aK=arguments;aI=this;if(aQ<=0){aJ=aP;aH=aM[V](aI,aK)}else{if(!aO){aO=c(aL,aQ)}}return aH}}function aG(aM,aN,aJ){var aL,aH,aI,aO;function aK(){aO=af;if(!aJ){aM[V](aI,aL)}}return function(){var aP=aJ&&!aO;aL=arguments;aI=this;clearTimeout(aO);aO=c(aK,aN);if(aP){aH=aM[V](aI,aL)}return aH}}function c(aI,aJ){var aH=Array[aB].slice[aE](arguments,2);return ag.setTimeout(function(){return aI[V](af,aH)},aJ)}function ab(aH){return c[V](af,[aH,1].concat(Array[aB].slice[aE](arguments,1)))}function aq(aH){throw new Error("Riloadr: "+aH)}function Q(aJ,aI,aH){aJ[o](L+aI,aH,v)}function U(aJ,aI,aH){aJ[N](L+aI,aH,v)}function S(aH){az(aH)}function w(aH){if(z.readyState===aC){aH()}else{var aI=function(){U(ag,ac,aI);aH()};Q(ag,ac,aI)}}return F});